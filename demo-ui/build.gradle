plugins {
  id 'java'
  id "com.github.node-gradle.node" version "2.2.4"
}

node {
  version = '14.4.0'
  npmVersion = '6.14.5'
  download = true
}

npm_run_build {
  inputs.files fileTree("src")

  inputs.file 'package.json'
  inputs.file 'package-lock.json'
  inputs.file 'karma.conf.js'
  inputs.file 'tsconfig.app.json'
  inputs.file 'tsconfig.json'
  inputs.file 'tsconfig.spec.json'
  inputs.file 'tslint.json'

  outputs.dir 'dist'
}

jar.dependsOn 'npm_run_build'

jar {
  from 'dist/demo-ui' into 'static'
}
